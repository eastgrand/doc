<!DOCTYPE html>
<html>
<head>
    <title>Competitive Analysis Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { background: #f0f0f0; padding: 10px; margin: 10px 0; }
        .success { background: #d4edda; }
        .error { background: #f8d7da; }
        .debug { font-size: 12px; color: #666; }
    </style>
</head>
<body>
    <h1>Competitive Analysis Debug Test</h1>
    <p>This page will test the competitive analysis processing with the fixed field names.</p>
    
    <div id="test-results"></div>
    
    <h3>Instructions:</h3>
    <ol>
        <li>Make sure the development server is running at <a href="http://localhost:3002" target="_blank">http://localhost:3002</a></li>
        <li>Go to the application in another tab</li>
        <li>Run a competitive analysis query like: "Nike vs Adidas competitive analysis"</li>
        <li>Check the browser console for debug messages</li>
        <li>Look for these specific messages:</li>
    </ol>
    
    <div class="debug">
        <p><strong>Expected Debug Flow:</strong></p>
        <ul>
            <li>ğŸ”¥ [CachedEndpointRouter] selectEndpoint called with query: "Nike vs Adidas competitive analysis"</li>
            <li>ğŸ”¥ [CachedEndpointRouter] Auto-selected endpoint: /competitive-analysis</li>
            <li>ğŸ”¥ [AnalysisEngine] About to call dataProcessor.processResults with endpoint: "/competitive-analysis"</li>
            <li>ğŸ” [DataProcessor] Selected processor for /competitive-analysis: CompetitiveDataProcessor</li>
            <li>ğŸ”¥ COMPETITIVE DATA PROCESSOR VALIDATE CALLED ğŸ”¥</li>
            <li>ğŸš¨ğŸš¨ğŸš¨ COMPETITIVE DATA PROCESSOR PROCESS() CALLED! ğŸš¨ğŸš¨ğŸš¨</li>
            <li>[CompetitiveDataProcessor] VALUE VERIFICATION for [Area Name]: ...</li>
            <li>ğŸ”¥ [AnalysisEngine] First processed record value: [should be 0-10, e.g., 6.24]</li>
        </ul>
        
        <p><strong>If you see values like 25+ instead of 0-10:</strong></p>
        <ul>
            <li>The CompetitiveDataProcessor is not being called</li>
            <li>Raw Nike market share data is being used instead of calculated competitive advantage score</li>
            <li>Check the console for any errors in the data processing</li>
        </ul>
        
        <p><strong>Success Indicators:</strong></p>
        <ul>
            <li>âœ… Values are in 0-10 range (e.g., 6.24, 8.91, 3.45)</li>
            <li>âœ… Map shows circles of different sizes (based on Nike market share)</li>
            <li>âœ… Map shows different colors (based on competitive advantage score 0-10)</li>
            <li>âœ… Legend appears at bottom right with color scale</li>
        </ul>
    </div>
    
    <script>
        console.log('ğŸ§ª Competitive Analysis Test Page Loaded');
        console.log('ğŸ“ Expected data fields in competitive-analysis.json:');
        console.log('   - value_MP30016A_B_P (Nike market share %)');
        console.log('   - value_MP33107A_B_P (Adidas market share %)'); 
        console.log('   - These should be processed into 0-10 competitive advantage scores');
        
        // Test if we can access the analysis engine (won't work from static file but shows the approach)
        console.log('ğŸ”§ To test manually:');
        console.log('   1. Go to the main app');
        console.log('   2. Open browser console');
        console.log('   3. Enter: "Nike vs Adidas competitive analysis"'); 
        console.log('   4. Watch console for debug messages');
    </script>
</body>
</html>